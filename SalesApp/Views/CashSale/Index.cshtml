@model SalesApp.ViewModel.CashSaleVM;

@{
    ViewBag.Title = "Cash Sale";

}

<div class="wrapper">
    <!-- Sidebar  -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <a href="" class="big-logo"><img src="~/img/big-logo.png" /></a>
            <a href="" class="small-logo"><img src="~/img/small-logo.png" /></a>
        </div>

        <div class="sidebar-content">
            <button type="button" id="dismiss" class="btn btn-info">
                <i class="las la-arrow-left"></i>
            </button>
            <div class="profile-setting">
                <div class="profile-img big-profile">
                    <img src="~/img/avatar-01.jpg">
                </div>
                <div class="profile-info big-profile-image">
                    <p class="profile-name">Vikram Solomon</p>
                    <p class="profile-designation">Sales executive</p>
                </div>
            </div>
            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#homeSubmenu"><i class="las la-chart-bar"></i> Dashboard</a>

                </li>
                <li>
                    <a href="#homeSubmenu"><i class="las la-print"></i> Print Sale</a>

                </li>
                <li>
                    <a href="#homeSubmenu"><i class="las la-toolbox"></i> Add Custom Category</a>

                </li>
                <li>
                    <a href="#homeSubmenu"><i class="las la-shapes"></i> Add new item shapes</a>

                </li>
            </ul>

        </div>


    </nav>
    </div>
    <!-- Page Content  -->
    <div id="content">
        <div class="header-container clearfix">
            <button type="button" id="sidebarCollapse" class="btn btn-info">
                <i class="las la-align-left"></i>
            </button>

            <h1><span class="fbold">Sales</span> <span class="fregular">Application</span></h1>

            <div class="account-wrap">
                <div class="account-item clearfix js-item-menu">
                    <div class="image">
                        <img src="~/img/avatar-01.jpg" alt="John Doe" />
                    </div>
                    <div class="content-account">
                        <a class="js-acc-btn" href="#">Parag Tawde</a>
                    </div>
                    <div class="account-dropdown js-dropdown">
                        <div class="info clearfix">
                            <div class="image">
                                <a href="#">
                                    <img src="~/img/avatar-01.jpg" alt="John Doe" />
                                </a>
                            </div>
                            <div class="content-account">
                                <h5 class="name">
                                    <a href="#">Parag Tawde</a>
                                </h5>
                                <span class="email">Sales executive</span>
                            </div>
                        </div>
                        <div class="account-dropdown__body">
                            <div class="account-dropdown__item">
                                <a href="#">
                                    <i class="zmdi zmdi-account"></i>Account
                                </a>
                            </div>
                            <div class="account-dropdown__item">
                                <a href="#">
                                    <i class="zmdi zmdi-settings"></i>Setting
                                </a>
                            </div>
                            <div class="account-dropdown__item">
                                <a href="#">
                                    <i class="zmdi zmdi-money-box"></i>Billing
                                </a>
                            </div>
                        </div>
                        <div class="account-dropdown__footer">
                            <a href="#">
                                <i class="zmdi zmdi-power"></i>Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="main-container">
            <div class="container-bg clearfix">
                <div class="container-header clearfix">
                    <h2>Add Cash Sale</h2>
                    <div class="header-sales-info">
                        <!-- <p class="float-left clients-name-info"><i class="las la-user-circle"></i> Shomayala Arooz</p> -->
                        <p class="float-left"><span class="fregular">Sale Date:</span> <span class="fbold">05/05/2020</span></p>
                        <p class="float-right"><span class="fregular">Mirror ID:</span> <span class="fbold">47345</span></p>
                        <p class="cart-display"><span class="clients-cart-info"><i class="las la-shopping-cart"></i><span class="cart-notify">2</span></span></p>


                    </div>
                </div>
                <!-- <div class="container-name-cart-info clearfix">
      <p class="clients-name-info"><i class="las la-user-circle"></i> Shomayala Arooz</p>
      <p class="clients-cart-info hide-mobile"><i class="las la-shopping-cart"></i> You have <span class="fbold">2 items</span> in your Cart</p>

    </div> -->

                <div class="container-fluid">


                    <!--
    <a href="" class="btn-create"><i class="las la-plus"></i></a>
    <a href="" class="btn-scan"><i class="las la-qrcode"></i></a> -->
                    <div class="row pad-t-10">
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-12">
                            <a href="" class="scan-btn-n"><i class="las la-qrcode"></i> Scan Item</a>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-12">
                            <a href="" class="custom-btn-n"><i class="las la-plus"></i> Add Custom Item</a>
                        </div>
                    </div>
                    @using (Html.BeginForm("AddSale", "CashSale"))
                    {
                        @Html.AntiForgeryToken()
                        <div class="row pad-rl-20 pad-tb-10">

                            <div class="col-lg-12 col-md-12 full-width-col pad-0">
                                <div class="container-fluid pad-0">
                                    <div class="row">

                                        <!--  <div class="col-lg-12 hide-desktop text-right">
                          <div class="scanner-image">
                            <img src="img/scan.png"/>
                          </div>
                        </div> -->
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <div class="form-group">
                                                <label for="StockNumber">Stock No.</label>
                                                <input type="text" class="form-control" id="StockNumber" asp-for="stockno" placeholder="" onblur="GetItemDetails()">
                                                <input type="hidden" asp-for="item_desc" />
                                            </div>
                                            <div class="description-container mobile-description">
                                                <!-- <h5>Description</h5> -->
                                                <!-- <p><span class="fbold product-name">Buddha</span> <span class="fregular product-info">Sitting Buddha</span></p> -->
                                                <ul>
                                                    <li class="mar-r-5"><p class="pad-r-0"><span class="product-name fbold" id="itemcategory1"> </span><span class="fregular" id="itemname1"> Sitting Buddha</span><span class="divide">/</span><span class="fbold" id="itemsize1">0*0*6</span><span class="divide">/</span><span class="fbold" id="itemstone1">Marble</span><span class="divide">/</span><span class="fbold" id="itemcolor1">White</span></p></li>


                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-4">
                                            <div class="form-group">
                                                <label for="Qty">Special Addition</label>
                                                <input type="text" class="form-control" asp-for="customspecialaddition" id="Qty" placeholder="">
                                            </div>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-4">
                                            <div class="form-group">
                                                <label for="Qty">Quantity</label>
                                                <input type="text" class="form-control" asp-for="quantity" id="Qty" placeholder="">
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-4 addition-addon clearfix">
                                            <label for="add" class="lable-head">Type</label>
                                            <div class="type-group">
                                                <div class="inputGroup">
                                                    @Html.RadioButtonFor(m => m._saletype, SaleType.CashMemo, new { @name = "radio", @type = "radio", @id = "CashMemo" })

                                                  
                                                    <label for="radio1" class="cm-lable">C/M</label>
                                                </div>
                                                <div class="inputGroup">
                                                    @Html.RadioButtonFor(m => m._saletype, SaleType.OrderForm, new { @name = "radio", @type = "radio", @id = "OrderForm" })
                                                    <label for="OrderForm" class="of-lable">O/F</label>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <div class="row ">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="description-container desktop-description">
                                                <!-- <h5>Description</h5> -->
                                                <!-- <p><span class="fbold product-name">Buddha</span> <span class="fregular product-info">Sitting Buddha</span></p> -->
                                                <ul>
                                                    <li class="mar-r-5"><p class="pad-r-0"><span class="product-name fbold" id="itemcategory"> </span><span class="fregular" id="itemname"> </span><span class="divide">/</span><span class="fbold" id="itemsize"></span><span class="divide">/</span><span class="fbold" id="itemstone"></span><span class="divide">/</span><span class="fbold" id="itemcolor"></span></p></li>


                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mar-b-10">
                                        <div class="col-lg-6 addition-add-new clearfix">
                                            <label for="add" class="lable-head">Add</label>
                                            <div class="addition-add-input">
                                                @{
                                                    @for (int i = 0; i < Model.specialadditions.Count(); i++)
                                                    {
                                                <div class="inputGroup">
                                                    @*<input id="chk@(item.Value)"
        type="checkbox"
        value="@item.Value"
        checked="@item.Selected" />*@
                                                    @*<label for="chk@(item.Value)">@item.Text</label>*@
                                                    <input asp-for="specialadditions[i].Selected" type="checkbox" id="option@(i)">
                                                    <label for="option@(i)" asp-for="specialadditions[i].Text">@Model.specialadditions[i].Text</label>
                                                    <input type="hidden" asp-for="specialadditions[i].Value" />
                                                    <input type="hidden" asp-for="specialadditions[i].Text" />
                                                </div>

                                                        @*<label for="option1">LED</label>*@

                                                    }
                                                    @*<div class="inputGroup">
                                            <input id="option2" name="option2" type="checkbox">
                                            <label for="option2">Wooden Frame</label>
                                        </div>
                                        <div class="inputGroup">
                                            <input id="option3" name="option3" type="checkbox">
                                            <label for="option3">Marble Cubes</label>
                                        </div>
                                        <div class="inputGroup">
                                            <input id="option4" name="option4" type="checkbox">
                                            <label for="option4">Addition</label>
                                        </div>*@
                                                }
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row mar-b-10">
                                        <div class="form-group col-lg-3 col-md-3 col-sm-3 col-xs-6 col-6">
                                            Currecny
                                            @Html.DropDownListFor(model => model.currencyid, Model.currencydetails as IEnumerable<SelectListItem>, "Select", htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.currencyid, "", new { @class = "text-danger" })

                                            <div>

                                            </div>
                                        </div>
                                        <div class="form-group col-lg-3 col-md-3 col-sm-3 col-xs-6 col-6">
                                            @*<label for="ConversionRate">Conv. Rate</label>*@
                                            @Html.LabelFor(model => model.conversionrate)
                                            @Html.EditorFor(model => model.conversionrate, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                            @Html.ValidationMessageFor(model => model.conversionrate, "", new { @class = "text-danger" })
                                            @*<input type="text" class="form-control" id="ConversionRate" placeholder="">*@
                                        </div>
                                        <div class="form-group col-lg-3 col-md-3 col-sm-3 col-xs-6 col-6">

                                            <div class="total-inra">
                                                @Html.LabelFor(model => model.totalvalue)
                                                @Html.EditorFor(model => model.totalvalue, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                @Html.ValidationMessageFor(model => model.totalvalue, "", new { @class = "text-danger" })
                                                @*<input type="text" class="form-control" id="totalvalue" placeholder="">*@
                                            </div>

                                        </div>

                                        <div class="col-lg-3 text-right col-md-3 col-sm-3 col-xs-6 col-6">
                                            <button class="btn-blue">Add Item</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                                                    }


                    @*<partial name="PartialOrderList.cshtml" />*@


                    <div class="row pad-t-0 pad-rl-20">
                        <div class="col-lg-12 pad-0">
                            <div class="table-responsive table--no-card m-b-30">
                                <table class="table table-borderless table-striped table-earning">
                                    <thead>
                                        <tr>
                                            <th>Description</th>
                                            <th>Currency</th>
                                            <th>Total</th>
                                            <th class="text-center">Action</th>

                                        </tr>
                                    </thead>
                                    <tbody>

                                        @if (Model.cashsaledetails != null)
                                            @if (Model.cashsaledetails.Count() > 0)
                                            {
                                                @foreach (var item in Model.cashsaledetails)
                                                {
                                                    <tr>
                                                        <td class="table-description-td">
                                                            <p class="table-description-p">
                                                                <span class="table-stock-number">@Html.DisplayFor(modelItem => item.stockid)</span>
                                                                <span class="table-type CM">@Html.DisplayFor(modelItem => item.ordertype)</span>
                                                            </p>
                                                            <p class="table-description">@Html.DisplayFor(modelItem => item.itemdesc)</p>
                                                        </td>
                                                        <td><i class="las la-rupee-sign"></i> @Html.DisplayFor(modelItem => item.salevalue)</td>
                                                        <td><i class="las la-rupee-sign"></i> @Html.DisplayFor(modelItem => item.salevalueinr)</td>
                                                        <td class="text-center">

                                                            @Html.ActionLink("Delete", "DeleteSale", "CashSale", new { orderid = item.itemorderid }, new { @class = "delete-item" })
                                                           
                                                            
                                                        </td>
                                                    </tr>
                                                }
                                                    }
                                            }
                                        @*<tr>
            <td class="table-description-td">
                <p class="table-description-p">
                    <span class="table-stock-number">A300</span>
                    <span class="table-type CM">C/M</span>
                </p>
                <p class="table-description">Buddha, Sitting Buddha, 0*0*6, White</p>

            </td>

            <td><i class="las la-rupee-sign"></i> 200</td>
            <td><i class="las la-rupee-sign"></i> 200</td>
            <td class="text-center">
                <a href="" class="delete-item"><i class="las la-times"></i></a>
            </td>

        </tr>
        <tr>
            <td>


                <p>
                    <span class="table-stock-number">A300</span>
                    <span class="table-type of">O/F</span>
                </p>

                <p class="table-description">Buddha, Sitting Buddha, 0*0*6, White</p>

            </td>

            <td><i class="las la-rupee-sign"></i> 200</td>
            <td><i class="las la-rupee-sign"></i> 200</td>
            <td class="text-center">
                <a href="" class="delete-item"><i class="las la-times"></i></a>
            </td>


        </tr>*@


                                        </tbody>
                                </table>
                            </div>
                        </div>


                        <div class="col-lg-12 text-right">
                            <p class="grand-total"><span class="fregular head">Grand Total:</span><span class="fbold val"><i class="las la-rupee-sign"></i> 400</span></p>
                        </div>


                    </div>

                    <div class="row pad-0 mar-0">
                        <div class="col-lg-12 footer-btn text-right pad-rl-40">
                            <button class="btn-pink">Finish</button>
                        </div>
                    </div>

                </div>


            <div class="container-bg clearfix">




            </div>
        </div>




    </div>


</div>
<div class="overlay"></div>

<script src="~/js/vendor/modernizr-3.8.0.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="~/js/vendor/jquery-3.4.1.min.js"><\/script>')</script>
<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<!-- jQuery Custom Scroller CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="~/js/plugins.js"></script>
<script src="~/js/main.js"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script type="text/javascript">

    function GetItemDetails() {
        var stockid = $('#StockNumber').val();
           $.ajax({
                type: "POST",
                url: '@Url.Action("GetStockDetails", "CashSale")',
                //contentType: false,
                //processData: false,
               data: { "stockid": stockid},
               success: function (data) {
                   if (data != null) {
                       var response = JSON.stringify(data[0]);
                       if (response != null) {
                           $('#itemcategory').text(data[0].category);
                           $('#itemcategory').css('color', 'green');
                           $('#itemname').text(data[0].itemname);
                           $('#itemsize').text(data[0].size);
                           $('#itemstone').text(data[0].marblestone);
                           $('#itemcolor').text(data[0].marblecolor);
                           $('#totalvalue').val(data[0].price);
                           $('#item_desc').val(data[0].category + ',' + data[0].itemname + ',' + data[0].size + ',' + data[0].marblecolor);

                       }
                       else {
                           $('#itemcategory').text('No Record Exists!!!');
                           $('#itemcategory').css('color', 'red');
                           $('#itemname').text('');
                           $('#itemsize').text('');
                           $('#itemstone').text('');
                           $('#itemcolor').text('');
                           $('#totalvalue').val('');
                       }
                   }
                   else {
                       $('#itemcategory').text('No Record Exists!!!');
                       $('#itemcategory').css('color', 'red');
                       $('#itemname').text('');
                       $('#itemsize').text('');
                       $('#itemstone').text('');
                       $('#itemcolor').text('');
                       $('#totalvalue').val('');
                   }



                },
                Error: function (err) {
                    $('#itemcategory').append(err);
                  //  debugger;
                },
                /* beforeSend: function () {
                     $(".progress").show();
                 },
                 complete: function () {
                    $(".progress").hide();
                 }*/
            });


    }







    $(document).ready(function () {
        $("#sidebar").mCustomScrollbar({
            theme: "minimal"
        });

        $('#dismiss, .overlay').on('click', function () {
            $('#sidebar').removeClass('active');
            $('.overlay-nav').removeClass('active');
        });

        // $('#sidebarCollapse').on('click', function () {
        //     $('#sidebar').addClass('active');
        //     $('.overlay').addClass('active');
        //     $('.collapse.in').toggleClass('in');
        //     $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        // });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar, #content').toggleClass('active');
            $('.overlay-nav').addClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });
    });</script>
