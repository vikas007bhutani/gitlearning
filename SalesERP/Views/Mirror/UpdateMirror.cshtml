@model SALEERP.ViewModel.MirrorDetailsVM;
@using PagedList.Mvc;
@{
    ViewBag.Title = "Mirror";
    if (this.ViewContext.FormContext == null)
    {
        this.ViewContext.FormContext = new FormContext();
    }

}

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
    @*function findname(id) {
        debugger;
        $(id).on('autocomplete', function (event, ui) {
            source:  '@Url.Action("Search")'
        });

    }*@
    @*$(document).ready(function () {
       $('#dataTabledriver').find('input[id^="Driver_List"]').on("keydown", function()
        {
                debugger;
             $('#dataTabledriver').find('input[id^="Driver_List"]').autocomplete( function (event, ui) {
            source:  '@Url.Action("Search")'
        });
            });
    });*@
    $(document).ready(function () {

        $('body').on('focus', 'input[id^="driver"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Driver_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
    });

        $('body').on('focus', 'input[id^="PAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Principle_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
        });
         $('body').on('focus', 'input[id^="EAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("EAgent_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
         });
        $('body').on('focus', 'input[id^="GuideAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Guide_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
        });
        $('body').on('focus', 'input[id^="LeaderAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Lead_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
         });
        $('body').on('focus', 'input[id^="EscortAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Escort_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
        });
        $('body').on('focus', 'input[id^="DemoAgentID_List"] ', function(){
            $(this).autocomplete({
                source: '@Url.Action("Demo_Search")',
                select: function (event, ui) {

                //set tagids to save
                    $(this).val(ui.item.value);
                    $(this).parent().find('input[type=hidden]').val(ui.item.id);
                //Tags for display
               // this.value = ui.value;
                return false;
            }
            });
        });

    });
</script>
@using (Html.BeginForm("UpdateMirror", "Mirror"))
{
    @Html.AntiForgeryToken()
    <section class="content">
        <div class="container-fluid">
            <div class="row">

                <!-- right column -->
                <div class="col-md-12">

                    <!-- general form elements disabled -->

                    <div class="card card-warning">
                        @if (Model != null && Model.Mirrors != null)
                        {
                            <div class="col-sm-2" style="float:left;width:300px;padding-left:10px;">
                                <div class="form-group">
                                    <input type="hidden" asp-for="Mirrors.FirstOrDefault().mirrorid" />
                                    <label asp-for="Mirrors.FirstOrDefault().mirrordate" class="control-label"></label>
                                    <input asp-for="Mirrors.FirstOrDefault().mirrordate" style="color:red"  />
                                    <span asp-validation-for="Mirrors.FirstOrDefault().mirrordate" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="card-header">
                                <h3 class="card-title">Driver Details</h3>
                            </div>
                            <!-- /.card-header -->

                            int z = 0;
                            <div class="card-body">

                                @*<div class="col-sm-2">
                                    <div class="form-group">
                                        <label></label>
                                        <span class="input-group-append">
                                            <button type="button" id="addNewdriver" href="javascript:void(0)" class="btn btn-info btn-flat">ADD DRIVER +</button>
                                        </span>
                                    </div>
                                </div>*@
                                <table id="dataTabledriver" class="">

                               
                                    @foreach (var i in Model.Mirrors)
                                    {

                                        int j = 0;
                                        @foreach (var driver in i.driver)
                                        {

                                    <tr>
                                        <td class="">

                                            <div class="form-group">
                                                @* <input type="hidden" id="agentid" value="" />*@
                                                @Html.HiddenFor(model => model.Mirrors[0].driver[j].agentid, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })



                                                @Html.LabelFor(model => model.Drivername)
                                                @*<input asp-for="Driver_List[0].Drivername"  onblur="findname(this.name)" />*@
                                                @Html.EditorFor(model => model.Mirrors[0].driver[j].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                @Html.ValidationMessageFor(model => model.Mirrors[0].driver[j].name, "", new { @class = "text-danger" })

                                            </div>
                                        </td>
                                        <td class="">
                                            <div class="form-group">
                                                @Html.LabelFor(model => model.Mob)
                                                @Html.EditorFor(model => model.Mirrors[0].driver[j].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                @Html.ValidationMessageFor(model => model.Mirrors[0].driver[j].mob, "", new { @class = "text-danger" })
                                            </div>
                                        </td>
                                        <td class="">
                                            <div class="form-group">
                                                @Html.LabelFor(model => model.vehicleNo)
                                                @Html.EditorFor(model => model.Mirrors[0].driver[j].vehicleNo, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                @Html.ValidationMessageFor(model => model.Mirrors[0].driver[j].vehicleNo, "", new { @class = "text-danger" })
                                            </div>
                                        </td>
                                        <td class="">
                                            <div class="form-group">
                                                @Html.LabelFor(model => driver.mob)
                                                <div class="">
                                                    @Html.DropDownListFor(model => model.Mirrors[0].driver[j].vehicletypeid, Model.vehicledetails as IEnumerable<SelectListItem>, "Select", htmlAttributes: new { @class = "form-control" })
                                                    @Html.ValidationMessageFor(model => model.Mirrors[0].driver[j].vehicletypeid, "", new { @class = "text-danger" })
                                                </div>
                                                @*<label>Vehicle</label>
                <select asp-for="Driver_List[0].vehicletypeid" asp-items="Model.vehicledetails" required class="form-control">
                    <option value="">--Please select--</option>
                </select>*@
                                            </div>
                                        </td>
                                        <td class="">
                                            <div class="form-group">

                                                @Html.LabelFor(model => model.Driver_List[0].parchiamount)
                                                <div class="col-md-10">
                                                    @Html.CheckBoxFor(model => model.Driver_List[0].isparchiamount, new { htmlAttributes = new { @class = "form-check-input" } })
                                                    @*<input class="form-check-input" value="@Model.Driver_List" type="checkbox">*@
                                                </div>

                                            </div>
                                        </td>
                                        <td>
                                            @if (j >= 1)
                                            {
                                                <a href="#" id="arm" onclick="Deleteqry(this)" class="remove">Remove</a>
                                            }
                                        </td>
                                    </tr>
                                            j++;
                                        }
                                        z++;
                                    }

                                </table>




                                @*  }*@
                                @* }*@
                                @*}*@


                            </div>
                        }
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                    <!-- general form elements disabled -->
                    <!-- /.card -->
                </div>
                <!--/.col (right) -->
                <div class="col-md-12">

                    <!-- general form elements disabled -->
                    <div class="card card-warning">
                        <div class="card-header">
                            <h3 class="card-title">Agent Details</h3>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">
                            @*<div class="">
                                <div class="form-group">
                                    <label></label>
                                    <span class="input-group-append">
                                        <button type="button" id="addnewagent" href="javascript:void(0)" class="btn btn-info btn-flat">ADD AGENT +</button>
                                    </span>
                                </div>
                            </div>*@
                            <table id="dataTableagent" class="">
                                <tr>
                                    @foreach (var i in Model.Mirrors)
                                    {

                                        int j = 0;
                                        @foreach (var item1 in i.principle)
                                        {

                                            <td class="">
                                                <!-- text input -->
                                                <div class="form-group">
                                                    @Html.HiddenFor(model => model.Mirrors[0].principle[j].agentid, new { htmlAttributes = new { @class = "form-control", required = "required"} })
                                                    <label>Principle Agent</label>
                                                    @Html.EditorFor(model => model.Mirrors[0].principle[j].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                    @Html.ValidationMessageFor(model => model.Mirrors[0].principle[j].name, "", new { @class = "text-danger" })
                                                    @Html.EditorFor(model => model.Mirrors[0].principle[j].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                    @Html.ValidationMessageFor(model => model.Mirrors[0].principle[j].mob, "", new { @class = "text-danger" })
                                                </div>
                                            </td>

                                            j++;
                                        }
                                        <td></td>
                                        int k = 0;
                                        @foreach (var item2 in i.excursion)
                                        {
                                          //  int k = 0;
                                            <td class="">
                                                <div class="form-group">

                                                    @Html.HiddenFor(model => model.Mirrors[0].excursion[k].agentid, new { htmlAttributes = new { @class = "form-control", required = "required" } })
                                                    <label>Excursion Agent</label>
                                                    @Html.EditorFor(model => model.Mirrors[0].excursion[k].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                    @Html.ValidationMessageFor(model => model.Mirrors[0].excursion[k].name, "", new { @class = "text-danger" })
                                                    @Html.EditorFor(model => model.Mirrors[0].excursion[k].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                    @Html.ValidationMessageFor(model => model.Mirrors[0].excursion[k].mob, "", new { @class = "text-danger" })
                                                </div>
                                            </td>
                                            k++;

                                        }

                                        <td></td>

                                    }
                                </tr>
                            </table>
                            <div class="">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Mirrors.FirstOrDefault().SeriesId)
                                    <div class="">
                                        @Html.DropDownListFor(model => model.Mirrors.FirstOrDefault().SeriesId, Model.seriesdetails as IEnumerable<SelectListItem>, "Select", htmlAttributes: new { @class = "form-control" })
                                        @Html.ValidationMessageFor(model => model.Mirrors.FirstOrDefault().SeriesId, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                            </div>


                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                    <!-- general form elements disabled -->
                    <!-- /.card -->
                </div>
                <div class="col-md-12">

                    <!-- general form elements disabled -->
                    <div class="card card-warning">
                        <div class="card-header">
                            <h3 class="card-title">Tour Details</h3>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">

                            <div class="">
                                @*<div style="float:left;margin-top:31px;">
                                    <button type="button" id="addnewguide" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>
                                </div>*@
                                <table id="dataTableguide" cellpadding="0" cellspacing="0">
                                    @foreach (var i in Model.Mirrors)
                                    {
                                        int m = 0;
                                        @foreach (var item_G in i.guide)
                                        {
                                            <tr>
                                                <td class="col-sm-3">
                                                    <!-- text input -->
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Mirrors[0].guide[m].agentid, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                        <label>Guide Name</label>



                                                        @Html.EditorFor(model => model.Mirrors[0].guide[m].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                        @Html.ValidationMessageFor(model => model.Mirrors[0].guide[m].name, "", new { @class = "text-danger" })
                                                        @Html.EditorFor(model => model.Mirrors[0].guide[m].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                        @Html.ValidationMessageFor(model => model.Mirrors[0].guide[m].mob, "", new { @class = "text-danger" })


                                                    </div>
                                                </td>
                                                <td></td>
                                            </tr>
                                            m++;
                                        }
                                    }
                                </table>
                                @*<button type="button" id="addnewguide" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>*@
                                @*<button type="button" onclick="CreateView()" href="javascript:void(0)" class="btn btn-info btn-flat">-</button>*@
                                <div style="margin-left: 351px;margin-top:-86px;">
                                    @*<div style="float:left;margin-top:31px;">
                                        <button type="button" id="addnewlead" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>
                                    </div>*@
                                    <table id="dataTablelead">
                                        @foreach (var i in Model.Mirrors)
                                        {
                                            int n = 0;
                                            @foreach (var item_LE in i.teamlead)
                                            {
                                                <tr>
                                                    <td class="">
                                                        <div class="form-group">

                                                            @Html.HiddenFor(model => model.Mirrors[0].teamlead[n].agentid, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                                            <label>Tour Leader</label>



                                                            @Html.EditorFor(model => model.Mirrors[0].teamlead[n].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                            @Html.ValidationMessageFor(model => model.Mirrors[0].teamlead[n].name, "", new { @class = "text-danger" })
                                                            @Html.EditorFor(model => model.Mirrors[0].teamlead[n].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                            @Html.ValidationMessageFor(model => model.Mirrors[0].teamlead[n].mob, "", new { @class = "text-danger" })

                                                        </div>
                                                    </td>
                                                    <td></td>
                                                </tr>
                                                n++;
                                            }
                                        }
                                    </table>
                                </div>
                                @*<button type="button" id="addnewlead" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>*@
                                @*<button type="button" onclick="CreateView()" href="javascript:void(0)" class="btn btn-info btn-flat">-</button>*@
                                <div style="margin-left: 724px;margin-top:-86px;">
                                    @*<div style="float:left;margin-top:31px;">
                                        <button type="button" id="addnewescort" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>
                                    </div>*@
                                    <table id="dataTableescort">
                                        @foreach (var i in Model.Mirrors)
                                        {
                                            int o=0;
                                            @foreach (var item_SC in i.teamescort)
                                            {
                                                <tr>
                                                    <td class="">
                                                        <div class="form-group">

                                                            @Html.HiddenFor(model => model.Mirrors[0].teamescort[o].agentid, new { htmlAttributes = new { @class = "form-control", required = "required"} })
                                                            <label>Tour Escort</label>



                                                            @Html.EditorFor(model => model.Mirrors[0].teamescort[o].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                            @Html.ValidationMessageFor(model => model.Mirrors[0].teamescort[o].name, "", new { @class = "text-danger" })
                                                            @Html.EditorFor(model => model.Mirrors[0].teamescort[o].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                            @Html.ValidationMessageFor(model => model.Mirrors[0].teamescort[o].mob, "", new { @class = "text-danger" })

                                                        </div>
                                                    </td>
                                                    <td></td>
                                                </tr>
                                                o++;
                                            }
                                        }
                                    </table>
                                    </div>
                                    @*<button type="button" id="addnewescort" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>*@
                                    @*<button type="button" onclick="CreateView()" href="javascript:void(0)" class="btn btn-info btn-flat">-</button>*@
                                </div>


                            </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                    <!-- general form elements disabled -->
                    <!-- /.card -->
                </div>
                <div class="col-md-12">

                    <!-- general form elements disabled -->
                    <div class="card card-warning">
                        <div class="card-header">
                            <h3 class="card-title">Other Details</h3>
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">

                            <div class="row">
                                <div class="col-sm-2">
                                    <!-- text input -->
                                    <div class="form-group">
                                        <label>Pax</label>
                                        @Html.EditorFor(model => model.Mirrors.FirstOrDefault().Pax, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter ..." } })
                                        @Html.ValidationMessageFor(model => model.Mirrors.FirstOrDefault().Pax, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Countryid)
                                        <div class="col-md-10">
                                            @Html.DropDownListFor(model => model.Mirrors.FirstOrDefault().Countryid, Model.countrydetails as IEnumerable<SelectListItem>, "Select", htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Mirrors.FirstOrDefault().Countryid, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="form-group">
                                        @*<label>Language</label>*@
                                        @Html.LabelFor(model => model.Languageid)
                                        <div class="col-md-10">
                                            @Html.DropDownListFor(model => model.Mirrors.FirstOrDefault().Languageid, Model.languagedetails as IEnumerable<SelectListItem>, "Select", htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Mirrors.FirstOrDefault().Languageid, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div>
                                        <table id="dataTabledemo" cellpadding="0" cellspacing="0">
                                            @foreach (var i in Model.Mirrors)
                                            {
                                                int p = 0;
                                                @foreach (var item_DE in i.demo)
                                                {
                                                    <tr>
                                                        <td class="col-sm-2">
                                                            <div class="form-group">
                                                                @Html.HiddenFor(model => model.Mirrors[0].demo[p].agentid, new { htmlAttributes = new { @class = "form-control", required = "required" } })
                                                                <label>Tour Escort</label>



                                                                @Html.EditorFor(model => model.Mirrors[0].demo[p].name, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Name ..." } })
                                                                @Html.ValidationMessageFor(model => model.Mirrors[0].demo[p].name, "", new { @class = "text-danger" })
                                                                @Html.EditorFor(model => model.Mirrors[0].demo[p].mob, new { htmlAttributes = new { @class = "form-control", required = "required", placeholder = "Enter Mobile ..." } })
                                                                @Html.ValidationMessageFor(model => model.Mirrors[0].demo[p].mob, "", new { @class = "text-danger" })

                                                            </div>
                                                        </td>
                                                        <td></td>
                                                    </tr>
                                                    p++;
                                                }
                                            }
                                        </table>
                                        </div>
                                        @*<div style="margin-top:32px;">
                                            <button type="button" id="addnewdemo" href="javascript:void(0)" class="btn btn-info btn-flat">+</button>
                                        </div>*@
                                        @*<button type="button" onclick="CreateView()" href="javascript:void(0)" class="btn btn-info btn-flat">-</button>*@
                                    </div>


                                </div>
                            <!-- /.card-body -->
                        </div>
                        <div style="float:right;align-content:center;margin-left:460px;">
                            <button type="submit" style="background-color:orangered" class="btn btn-info btn-flat">Finish</button>
                            @Html.ActionLink("CANCEL", "Index", "Mirror","", new { @class = "btn btn-info btn-flat" })
                            @*<button type="button" href="javascript:void(0)" style="background-color:orangered" class="">Cancel</button>*@
                        </div>
                        <!-- /.card -->
                        <!-- general form elements disabled -->
                        <!-- /.card -->
                    </div>
                </div>
            </div>
        </div>
    </section>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>


<script>
    $("#submit").click(function () {
        var form = $("form")
            .removeData("validator") /* added by the raw jquery.validate plugin */
            .removeData("unobtrusiveValidation");  /* added by the jquery unobtrusive plugin*/

        $.validator.unobtrusive.parse(form);

        form.data('unobtrusiveValidation');
    });


</script>
<script language="javascript">
    $(document).ready(function () {
     @*$('#dataTabledriver').find('input[id^="Driver_List"]').autocomplete({
            source: '@Url.Action("Search")'
        });*@
        //1. Add new row
        $("#addNewdriver").click(function (e) {
            var markup;
           // e.preventDefault();
            // $("#dataTable").show();
            //  $("#dataTablebank").show();

            var $tableBody = $("#dataTabledriver");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');

            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
               // var oldI = $(this).attr('id');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
             //   var newI = oldI.replace('_' + suffix + '__', '_' + (parseInt(suffix) + 1) + '__');

                $(this).attr('name', newN);
             //   $(this).attr('id', newI);
                //Replaced value
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }
                }

                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });

        // 2. Bank Details
        $("#addnewagent").click(function (e) {
            var markup;
            e.preventDefault();
            $("#dataTableagent").show();
            //  $("#dataTablebank").show();
            debugger;
            var $tableBody = $("#dataTableagent");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');
            debugger;
            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input,select'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
                $(this).attr('name', newN);
                //Replaced value
                debugger;
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }

                }
                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });

        $("#addnewguide").click(function (e) {
            var markup;
            e.preventDefault();
            $("#dataTableguide").show();
            //  $("#dataTablebank").show();
            debugger;
            var $tableBody = $("#dataTableguide");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');
            debugger;
            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input,select'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
                $(this).attr('name', newN);
                //Replaced value
                debugger;
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }

                }
                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });
        $("#addnewlead").click(function (e) {
            var markup;
            e.preventDefault();
            $("#dataTablelead").show();
            //  $("#dataTablebank").show();
            debugger;
            var $tableBody = $("#dataTablelead");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');
            debugger;
            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input,select'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
                $(this).attr('name', newN);
                //Replaced value
                debugger;
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }

                }
                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });
        $("#addnewescort").click(function (e) {
            var markup;
            e.preventDefault();
            $("#dataTableescort").show();
            //  $("#dataTablebank").show();
            debugger;
            var $tableBody = $("#dataTableescort");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');
            debugger;
            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input,select'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
                $(this).attr('name', newN);
                //Replaced value
                debugger;
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }

                }
                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });
        $("#addnewdemo").click(function (e) {
            var markup;
            e.preventDefault();
            $("#dataTabledemo").show();
            //  $("#dataTablebank").show();
            debugger;
            var $tableBody = $("#dataTabledemo");
            var $trLast = $tableBody.find("tr:last");

            var $trNew;

            var suffix = $trLast.find(':input:first').attr('name');
            debugger;
            if (typeof (suffix) != "undefined") {

                $trNew = $trLast.clone();
            }
            else {

                $trNew = "<tr style='border:1px solid black'><td><input class='input100' placeholder='UserName' id='AgentContact_0_Mobile' name='AgentContact[0].Mobile' type='text'/></td><td><input class='input100' placeholder='UserEmail' id='AgentContact_0_Email'  name='AgentContact[0].Email' type='text'/></td><td><a href='#' onclick='Deleteqry(this)' class='remove'>Remove</a></td></tr>";
                $trLast.after($trNew);
            }

            var suffix = $trNew.find(':input:first').attr('name').match(/\d+/);
            $trNew.find("td:last").html('<a href="#" onclick="Deleteqry(this)" class="remove">Remove</a>');
            $.each($trNew.find(':input,select'), function (i, val) {
                // Replaced Name
                var oldN = $(this).attr('name');
                var newN = oldN.replace('[' + suffix + ']', '[' + (parseInt(suffix) + 1) + ']');
                $(this).attr('name', newN);
                //Replaced value
                debugger;
                var type = $(this).attr('type');
                if (typeof (type) != "undefined") {
                    if (type.toLowerCase() == "text") {
                        $(this).attr('value', '');
                    }

                }
                // If you have another Type then replace with default value
                $(this).removeClass("input-validation-error");

            });
            $trLast.after($trNew);

            //  Re-assign Validation
            //var form = $("form")
            //    .removeData("validator")
            //    .removeData("unobtrusiveValidation");
            //$.validator.unobtrusive.parse(form);
        });

    });
    function Deleteqry(_this) {
        if (confirm("Are you sure you want to delete this Row?") == true)
            $(_this).closest('tr').remove();
        return false;
    }
</script>


